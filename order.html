<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order – Trinetra Bhojanalaya</title>

    <link rel="stylesheet" href="assets/style.css">

    <script src="assets/cart.js"></script>
    <script src="assets/delivery.js" defer></script>
</head>

<body>

<header class="navbar">
    <div class="nav-left">
        <img src="images/logo.jpg" class="logo">
        <span class="brand">Order Now</span>
    </div>
</header>

<section class="order-box">

    <h1>Your Order</h1>

    <!-- CART SUMMARY -->
    <div id="cartSummary"></div>

    <h1>Customer Details</h1>

    <label>Your Name</label>
    <input id="custName" type="text" placeholder="Enter your name">

    <label>Order Type</label>
    <select id="orderType" onchange="handleOrderType()">
        <option value="delivery">Delivery</option>
        <option value="takeaway">Takeaway</option>
    </select>

    <!-- DELIVERY ADDRESS -->
    <div id="addressBox">
        <label>Delivery Address</label>
        <textarea id="deliveryAddress" placeholder="Enter complete delivery address"></textarea>
    </div>

    <!-- GPS BUTTON -->
    <button id="gpsBtn" class="btn-secondary" onclick="getGPS()">Use My Current Location</button>
    <p id="gpsStatus" style="font-size:14px; margin-top:6px; color:#888;"></p>

    <p id="deliveryNote" style="margin-top:10px; color:#c96a1b;"></p>

    <button class="btn-primary" onclick="sendToWhatsApp()">Place Order</button>
</section>

<script>
    // Render cart on page load
    let cart = getSavedCart();
    let box = document.getElementById("cartSummary");

    let html = `<h2>Items:</h2><ul style="margin-top:10px;">`;

    cart.forEach(item => {
        html += `<li>${item.name} x${item.qty} — ₹${item.qty * item.price}</li>`;
    });

    html += `</ul><h3 style="margin-top:10px;">Total: ₹${cart.reduce((s,x)=>s+x.price*x.qty,0)}</h3>`;

    box.innerHTML = html;
</script>

</body>
</html>
