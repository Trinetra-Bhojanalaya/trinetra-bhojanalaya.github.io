<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel</title>

<link rel="stylesheet" href="assets/style.css">

<script type="module">

import { auth, db } from "./assets/firebase.js";
import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

onAuthStateChanged(auth, user => {
    if (!user) window.location.href = "admin-login.html";
});

async function loadOrders() {
    const list = document.getElementById("orderList");
    const q = await getDocs(collection(db, "orders"));

    q.forEach(doc => {
        const o = doc.data();
        let div = document.createElement("div");
        div.className = "order-item";
        div.innerHTML = `
            <b>Name:</b> ${o.name}<br>
            <b>Order:</b> ${o.order}<br>
            <b>Type:</b> ${o.type}<br>
            <b>Address:</b> ${o.address}<br>
            <b>Time:</b> ${o.timestamp}<br>
            <hr>
        `;
        list.appendChild(div);
    });
}

window.onload = loadOrders;

</script>

</head>

<body>

<section class="order-box">
    <h1>All Orders</h1>
    <div id="orderList"></div>
</section>

</body>
</html>

